metadata:
  version: 1
sources:
  # CalEnviroScreen
  calenviroscreen_raw:
    driver: shapefile
    description: CalEnviroScreen 4.0 raw data
    args:
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/calenviroscreen40shpf2021shp.zip
      use_fsspec: true
  ca_geoportal:
        driver: dcat
        args:
          url: https://gis.data.ca.gov/data.json
          items:
              county_boundaries: https://gis.data.ca.gov/datasets/CALFIRE-Forestry::california-county-boundaries   
  ## PROCESSED DATA: SERVICE INCREASE ANALYSIS
  bus_stop_times_by_tract:
    driver: geoparquet
    description: Number of daily bus arrivals by tract
    args:
      # source: bus_service_increase/create_analysis_data.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/bus_stop_times_by_tract.parquet
  service_increase_by_route:
    driver: parquet
    description: Number of additional trips to reach desired frequencies by route.
    args:
      # source: bus_service_increase/setup_service_increase.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/service_increase.parquet 
  service_increase_by_operator:
    driver: parquet
    description: Number of additional buses, trips, capital expenditures to reach desired frequencies by operator.
    args:
      # source: bus_service_increase/setup_service_increase.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/increase_by_operator.parquet 
  ## PROCESSED DATA: PARALLEL CORRIDORS ANALYSIS
  transit_routes:
    driver: geoparquet
    description: All GTFS schedule transit routes.
    args:
      # source: bus_service_increase/create_analysis_data.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/2022_Jan/shapes_processed.parquet
  state_highway_network:
    driver: geoparquet
    description: State highway network.
    args:
    # source: bus_service_increase/create_parallel_corridors.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/state_highway_network.parquet
  highways_cleaned:
    driver: geoparquet
    description: SHN dissolved and added 250 ft buffer. Use this for plotting on maps.
    args:
      # source: bus_service_increase/create_parallel_corridors.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/highways.parquet
  parallel_or_intersecting_routes:
    driver: geoparquet
    description: All transit routes with intersection to SHN (each route-highway route segment kept).
    args:
      # source: bus_service_increase/create_parallel_corridors.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/parallel_or_intersecting.parquet
  parallel_trips_with_stops:
    driver: geoparquet
    description: Parallel routes to SHN, 1 trip selected for each route, with stop info.
    args:
      # source: bus_service_increase/E1_setup_parallel_trips_with_stops.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/parallel_trips_with_stops.parquet
  gmaps_results:
    driver: geoparquet
    description: Parallel routes to SHN with car travel time
    args:
      # source: bus_service_increase/E4_make_gmaps_results.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/gmaps_results.parquet
  competitive_route_variability:
    driver: geoparquet
    description: gmaps_results, wrangled to attach trip info back, to visualize competitive route variability in trip times
    args:
      # source: bus_service_increase/E5_make_stripplot_data.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/competitive_route_variability.parquet
  # 100 Recs for Better Buses 
  bus_routes_on_hwys:
    driver: geoparquet
    description: Bus routes that run a significant portion of their route on the hwy.
    args:
      # source: bus_service_increase/G1_better_buses_data.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/bus_routes_on_hwys.parquet
  segmented_highways:
    driver: geoparquet
    description: Highways cut at 0.5 mi segments.
    args:
      # source: bus_service_increase/G1_better_buses_data.py
      urlpath: gs://calitp-analytics-data/data-analyses/bus_service_increase/segmented_highways.parquet
      
      
     