interactions:
- request:
    body: '{"maximumBytesBilled": "5000000000", "defaultDataset": {"projectId": "cal-itp-data-infra-staging",
      "datasetId": "test_shared_utils"}, "queryParameters": [{"parameterType": {"type":
      "STRING"}, "parameterValue": {"value": "US/Pacific"}, "name": "datetime_1"},
      {"parameterType": {"type": "STRING"}, "parameterValue": {"value": "2025-10-12"},
      "name": "datetime_2"}, {"parameterType": {"type": "STRING"}, "parameterValue":
      {"value": "US/Pacific"}, "name": "datetime_3"}, {"parameterType": {"type": "STRING"},
      "parameterValue": {"value": "2025-10-12"}, "name": "datetime_4"}], "parameterMode":
      "NAMED", "useLegacySql": false, "formatOptions": {"useInt64Timestamp": true},
      "location": "us-west2", "query": "SELECT DISTINCT `dim_provider_gtfs_data`.`key`,
      `dim_provider_gtfs_data`.`public_customer_facing_fixed_route`, `dim_provider_gtfs_data`.`public_customer_facing_or_regional_subfeed_fixed_route`,
      `dim_provider_gtfs_data`.`organization_key`, `dim_provider_gtfs_data`.`organization_name`,
      `dim_provider_gtfs_data`.`organization_itp_id`, `dim_provider_gtfs_data`.`organization_hubspot_company_record_id`,
      `dim_provider_gtfs_data`.`organization_ntd_id`, `dim_provider_gtfs_data`.`organization_source_record_id`,
      `dim_provider_gtfs_data`.`service_key`, `dim_provider_gtfs_data`.`service_name`,
      `dim_provider_gtfs_data`.`service_source_record_id`, `dim_provider_gtfs_data`.`gtfs_service_data_customer_facing`,
      `dim_provider_gtfs_data`.`regional_feed_type`, `dim_provider_gtfs_data`.`associated_schedule_gtfs_dataset_key`,
      `dim_provider_gtfs_data`.`schedule_gtfs_dataset_name`, `dim_provider_gtfs_data`.`schedule_source_record_id`,
      `dim_provider_gtfs_data`.`service_alerts_gtfs_dataset_name`, `dim_provider_gtfs_data`.`service_alerts_source_record_id`,
      `dim_provider_gtfs_data`.`vehicle_positions_gtfs_dataset_name`, `dim_provider_gtfs_data`.`vehicle_positions_source_record_id`,
      `dim_provider_gtfs_data`.`trip_updates_gtfs_dataset_name`, `dim_provider_gtfs_data`.`trip_updates_source_record_id`,
      `dim_provider_gtfs_data`.`schedule_gtfs_dataset_key`, `dim_provider_gtfs_data`.`service_alerts_gtfs_dataset_key`,
      `dim_provider_gtfs_data`.`vehicle_positions_gtfs_dataset_key`, `dim_provider_gtfs_data`.`trip_updates_gtfs_dataset_key`,
      `dim_provider_gtfs_data`.`_valid_from`, `dim_provider_gtfs_data`.`_valid_to`,
      `dim_provider_gtfs_data`.`_is_current` \nFROM `dim_provider_gtfs_data` \nWHERE
      datetime(`dim_provider_gtfs_data`.`_valid_from`, @`datetime_1`) <= datetime(@`datetime_2`)
      AND datetime(`dim_provider_gtfs_data`.`_valid_to`, @`datetime_3`) >= datetime(@`datetime_4`)",
      "maxResults": 5000, "requestId": "639e8a6a-cb45-4231-9caf-2b3d80da4204"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip
      Authorization:
      - FILTERED
      Connection:
      - keep-alive
      Content-Length:
      - '2638'
      Content-Type:
      - application/json
      User-Agent:
      - sqlalchemy/1.4.46 gl-python/3.11.13 grpc/1.76.0 gax/2.27.0 gapic/3.38.0 gccl/3.38.0
      X-Goog-API-Client:
      - sqlalchemy/1.4.46 gl-python/3.11.13 grpc/1.76.0 gax/2.27.0 gapic/3.38.0 gccl/3.38.0
      x-goog-user-project:
      - cal-itp-data-infra-staging
    method: POST
    uri: https://bigquery.googleapis.com/bigquery/v2/projects/cal-itp-data-infra-staging/queries?prettyPrint=false
  response:
    body:
      string: '{"kind":"bigquery#queryResponse","schema":{"fields":[{"name":"key","type":"STRING","mode":"NULLABLE"},{"name":"public_customer_facing_fixed_route","type":"BOOLEAN","mode":"NULLABLE"},{"name":"public_customer_facing_or_regional_subfeed_fixed_route","type":"BOOLEAN","mode":"NULLABLE"},{"name":"organization_key","type":"STRING","mode":"NULLABLE"},{"name":"organization_name","type":"STRING","mode":"NULLABLE"},{"name":"organization_itp_id","type":"INTEGER","mode":"NULLABLE"},{"name":"organization_hubspot_company_record_id","type":"STRING","mode":"NULLABLE"},{"name":"organization_ntd_id","type":"STRING","mode":"NULLABLE"},{"name":"organization_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"service_key","type":"STRING","mode":"NULLABLE"},{"name":"service_name","type":"STRING","mode":"NULLABLE"},{"name":"service_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"gtfs_service_data_customer_facing","type":"BOOLEAN","mode":"NULLABLE"},{"name":"regional_feed_type","type":"STRING","mode":"NULLABLE"},{"name":"associated_schedule_gtfs_dataset_key","type":"STRING","mode":"NULLABLE"},{"name":"schedule_gtfs_dataset_name","type":"STRING","mode":"NULLABLE"},{"name":"schedule_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"service_alerts_gtfs_dataset_name","type":"STRING","mode":"NULLABLE"},{"name":"service_alerts_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"vehicle_positions_gtfs_dataset_name","type":"STRING","mode":"NULLABLE"},{"name":"vehicle_positions_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"trip_updates_gtfs_dataset_name","type":"STRING","mode":"NULLABLE"},{"name":"trip_updates_source_record_id","type":"STRING","mode":"NULLABLE"},{"name":"schedule_gtfs_dataset_key","type":"STRING","mode":"NULLABLE"},{"name":"service_alerts_gtfs_dataset_key","type":"STRING","mode":"NULLABLE"},{"name":"vehicle_positions_gtfs_dataset_key","type":"STRING","mode":"NULLABLE"},{"name":"trip_updates_gtfs_dataset_key","type":"STRING","mode":"NULLABLE"},{"name":"_valid_from","type":"TIMESTAMP","mode":"NULLABLE"},{"name":"_valid_to","type":"TIMESTAMP","mode":"NULLABLE"},{"name":"_is_current","type":"BOOLEAN","mode":"NULLABLE"}]},"jobReference":{"projectId":"cal-itp-data-infra-staging","jobId":"job_nh9hbc4iSOMEZAZ_GT83CLIJgWwj","location":"us-west2"},"totalRows":"3","rows":[{"f":[{"v":"145279bf2bb891a6f43abd24403a46d7"},{"v":"false"},{"v":"false"},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":"b6280b24ea50c714c38f0c02bd8d3a2e"},{"v":"Rosemead
        Passio Schedule"},{"v":"reccLvZxTMz1FuNii"},{"v":"Rosemead Passio Alerts"},{"v":"recm7XryAyH4sP0ZF"},{"v":"Rosemead
        Passio Vehicle Positions"},{"v":"rec1RocbLnc4A9eE4"},{"v":"Rosemead Passio
        Trip Updates"},{"v":"recQtNJAv4UyQjMh4"},{"v":"b6280b24ea50c714c38f0c02bd8d3a2e"},{"v":"c766db2bb5dd244b0e2176f4dfc35999"},{"v":"ad67eda06e383bbd5c174eab700915fb"},{"v":"70b85693df485b227c4a1a87ac46d065"},{"v":"1753401600000000"},{"v":"4070908799999999"},{"v":"true"}]},{"f":[{"v":"5beb8a6bf200cfdf00da66ac1521d526"},{"v":"false"},{"v":"false"},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":"1ba3e20e8edb9c64866206d138aaca83"},{"v":"Ridgecrest
        Schedule"},{"v":"recb7v2QiflfKM77w"},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":"1ba3e20e8edb9c64866206d138aaca83"},{"v":null},{"v":null},{"v":null},{"v":"1749859200000000"},{"v":"4070908799999999"},{"v":"true"}]},{"f":[{"v":"90ebcb3f9a649985be20bc10aa3ae3d4"},{"v":"false"},{"v":"false"},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":null},{"v":"794534a42bc6cbb1f4f7bc4d4bb1be16"},{"v":"Avalon
        Schedule Historic"},{"v":"recdcpS2s3wuT3QAG"},{"v":"Avalon Alerts Historic"},{"v":"recgHXDRuyrKbOD47"},{"v":"Avalon
        Vehicle Positions"},{"v":"recvwGOdqwtvPzKhZ"},{"v":"Avalon Trip Updates"},{"v":"recaDdOPYGgkoCOoT"},{"v":"794534a42bc6cbb1f4f7bc4d4bb1be16"},{"v":"688fc08edb6dbba6ce92a11b36929993"},{"v":"66f7f7dfc9290a80d99b5b2e645d8659"},{"v":"b070831f700176fc88e2464cb353c24e"},{"v":"1749859200000000"},{"v":"4070908799999999"},{"v":"true"}]}],"totalBytesProcessed":"1407","jobComplete":true,"cacheHit":false,"queryId":"job_nh9hbc4iSOMEZAZ_GT83CLIJgWwj","jobCreationReason":{"code":"REQUESTED"},"totalBytesBilled":"10485760","totalSlotMs":"26","location":"us-west2","creationTime":"1762216517074","startTime":"1762216517169","endTime":"1762216517337"}'
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json; charset=UTF-8
      Date:
      - Tue, 04 Nov 2025 00:35:17 GMT
      Server:
      - ESF
      Transfer-Encoding:
      - chunked
      Vary:
      - Origin
      - X-Origin
      - Referer
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-XSS-Protection:
      - '0'
    status:
      code: 200
      message: OK
version: 1
